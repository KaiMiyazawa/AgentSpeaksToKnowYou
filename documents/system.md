# システム全体の構築方法を理解する

1. [音声会話システムの構成要素を理解する](./audio_chat.md)
1. [性格診断に用いるデータの収集方法を理解する](./dataset.md)
1. [特徴量抽出と機械学習による性格推定を理解する](./prediction.md)
1. システム全体の構成方法を理解する
1. [実際のコードはこちら](../gui_audio_chat.py)

## 1~3の技術を組み合わせたシステムの構築
各部品を駆動するプログラム全体はPythonで記述されています。
音声会話システム部分には、os.system()によって実行されたafplayコマンドによって音声が再生されます。また、録音に関しては、pyaudioライブラリを用いて録音を行っています。

また、音声会話システムによって生成された音声ファイル(wav)とテキストファイル(txt)は、それぞれのファイル名をリストとして適宜保管しています。そして、対話終了後、後述するGUIによるメタデータを含めたデータを、pandasライブラリのDataFrameに格納しています。

これにより、音声データとテキストデータはそれぞれテーブル形式のデータとして管理され、それぞれのデータを加工することで不必要なデータを削除したり、特徴量を抽出したりする処理が行われます。

その後、これらのテーブルデータはlightGBMによって予測に用いられます。

## GUI (PyQt5)
システム全体の構築において、GUIは重要な役割を果たしています。GUIはPyQt5を用いて作成されており、音声会話システムの起動、音声の再生、録音、性格推定の実行、結果の表示、データの保存などの機能を提供しています。

実際の画面上では、操作を簡単にするため、ボタンは二つに絞っており、それぞれ音声の録音の開始/終了を担うボタンと、性格推定の開始を担うボタンです。

性格推定の開始を担うボタンを押すと、別ウィンドウが開き、性格推定に使われるメタデータを入力するためのGUIが表示されます。このGUIには、性格推定に使われる音声データとテキストデータのファイル名、性別、年齢、就労状況をボタンによる選択で入力することができます。

next: [実際のコードはこちら](../gui_audio_chat.py)